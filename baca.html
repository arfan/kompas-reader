<html>
<head>

<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.6.custom.css" rel="stylesheet" />	
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.6.custom.min.js"></script>
		
		
<script type="text/javascript">

$(function(){

	$('#datepicker').datepicker({
		inline: false, 
		dateFormat: 'dd-M-yy'
	});
				
});


$(document).ready(function() {

	$('#godate').click(function() {

		//alert($('#datepicker').val());
		document.location.href = "baca.html?tanggal="+$('#datepicker').val();
		
	});

});



</script>
<script type="text/javascript">
function gup( name ) {
	name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");  
	var regexS = "[\\?&]"+name+"=([^&#]*)";  
	var regex = new RegExp( regexS );
	var results = regex.exec( window.location.href );
	
	if( results == null )   
		return "";  
	else  
		return results[1];
}

function init()
{
	var tanggal = gup("tanggal");
	var halaman = gup("halaman");
	
	var currentTime = new Date();

	if(tanggal=="")
		tanggal = pad(currentTime.getDate(),2)+"-"+month(currentTime.getMonth())+"-"+currentTime.getFullYear();
	
	if(halaman=="")
		halaman="1";
	
	document.getElementById("tanggal").value = tanggal;
	document.getElementById("halaman").value = halaman;
	document.getElementById("datepicker").value = tanggal;
	
	var nav = document.getElementById("navigation");
	nav.innerHTML="";
	var i;
	for(i=1;i<=64;i++)
	{
		if(halaman==i)
			nav.innerHTML+=" [ ";
		nav.innerHTML+='<a href="baca.html?tanggal='+tanggal+'&halaman='+i+'">'+i+'</a> ';
		
		if(halaman==i)
			nav.innerHTML+="] ";
		
	}
	
	setPicture();
}


function pad(number, length) {
	var str = '' + number;
	while (str.length < length) {
		str = '0' + str;
	}

	return str;
}

function month(m)
{
	if(m==0)
		return "Jan";
	else if(m==1)
		return "Feb";
	else if(m==2)
		return "Mar";
	else if(m==3)
		return "Apr";
	else if(m==4)
		return "May";
	else if(m==5)
		return "Jun";
	else if(m==6)
		return "Jul";
	else if(m==7)
		return "Aug";
	else if(m==8)
		return "Sep";
	else if(m==9)
		return "Oct";
	else if(m==10)
		return "Nov";
	else if(m==11)
		return "Dec";

}


function setPicture()
{
	var tanggal = document.getElementById("tanggal").value;
	var halaman = document.getElementById("halaman").value;
	
	//alert(tanggal);
	//alert(halaman);
	
	var picJPG = 'http://images.cdn.realviewdigital.com/djvu/Kompas/Kompas/'+tanggal+'/webimages/page'+pad(halaman,7)+'_large.jpg';
	var picPNG = 'http://images.cdn.realviewdigital.com/djvu/Kompas/Kompas/'+tanggal+'/webimages/page'+pad(halaman,7)+'_large.png';
	
	var gambarJPG = document.getElementById("gambarJPG");
	var gambarPNG = document.getElementById("gambarPNG");
	
	gambarJPG.src = picJPG;
	gambarPNG.src = picPNG;
	
	
	var don = document.getElementById("download");
	don.innerHTML="";
	don.innerHTML+='<a href="'+picJPG+'">jpg</a> ';
	don.innerHTML+='<a href="'+picPNG+'">png</a> ';
	
	
	//alert(picJPG);
	//alert(picPNG);
}

function nextPage()
{
	var halaman = document.getElementById("halaman").value;
	halaman = parseInt(halaman) + 1;
	document.getElementById("halaman").value = halaman;
	
	setPicture();
}

function prevPage()
{
	var halaman = document.getElementById("halaman").value;
	halaman = parseInt(halaman) - 1 ;
	document.getElementById("halaman").value = halaman;
	
	setPicture();

}

</script>

</head>

<body onload="init()">

<div>
	<input type="hidden" id="tanggal" value="13-Sep-2010" />
	<input type="hidden" id="halaman" value="1" />

	
	
	<div>
		<!--
		<input type="button" value="prev" onClick="prevPage()" />
		<input type="button" value="next" onClick="nextPage()" />
		-->
		
		<input id="datepicker" type="text">
		<input id="godate" type="button" value="go"></input>

		<span id="download" ></span>
		<span id="navigation" ></span>
	</div>
	<div style="position:absolute;width:100%;padding:0px">
		<img src="" width="100%" style="padding:0px" id="gambarJPG" alt="abdul arfan"/>
	</div>
	<div style="position:absolute;width:100%;padding:0px">
		<img src="" width="100%" style="padding:0px" id="gambarPNG" alt="abdul arfan"/>

	</div>
</div>

</body>
</html>
